# Mental Checker
## 開発テーマ 
**Metal Care × Tech**
## 製品概要
### 背景(製品開発のきっかけ、課題等）
コロナウイルスの影響によってうつ患者が増加したとの[ニュース](https://www.yomiuri.co.jp/medical/20210619-OYT1T50169/)を見たのが本製品の開発のきっかけである。私達の友人なかにもコロナ期間に「軽いうつと診断され、睡眠薬がないと寝れなくなってしまった」という人がいる。このような経験もあり「うつ」は他人事ではないと認識するようになり始め、うつに苦しむがいない社会への貢献を目的に本製品を開発するに至った。

**日本の現状**

日本ののうつ病患者数は73万人で、潜在患者数は230万人と推定されている。人口に対する割合で見ると、他国の比べて3〜6倍であるとの見解もある。このことからも「うつ」が日本において重要な課題であることが言える。

うつ病は、放置すれば症状の悪化や治療の長期化を招くため、早期発見・早期治療が重要であるとされている。対策としては精神的・身体的不調を感じたら、まず、かかりつけ医やかかりつけ薬局への相談を心がけことが挙げられている。

しかし、潜在患者の多くは自ら診断を受けること進んではしないと言われている。([参考：3割がメンタルの不調を抱え、そのうち4割は受診も相談もしていない「働く人のコロナ鬱に関する調査」](https://prtimes.jp/main/html/rd/p/000000224.000018991.html))

相談や受診をすることなく一人で抱え込んでしまい、ふさぎ込んでしまうことによって負のサイクルがはじまってしまう。特に若年層においてはこの傾向はその後の成長を考慮するとこのリスクは見過ごすことができない。また、コロナでも大きな影響を受けたと言われている。（[参考：新型コロナ、メンタル面では若年成人に最大の打撃](https://news.yahoo.co.jp/articles/ade0a8e390f6acd40747932de2582bcb14e4a326)）

私達はこの「**自ら相談や受診に向かうことができないうつ患者層**」を探し出し、能動的にアプローチすることが重要であると考え、本製品を開発した。

### 製品説明（具体的な製品の説明）
### 特徴
1. **日報やちょっとしたアンケートなどのテキスト情報からうつ傾向スコアを算出することが可能。**
2. **学校・企業など様々な場所での運用が期待できる。**
3. **算出したスコアは運用者（アンケート作成者）のみが閲覧可能に制限している。**

### 解決出来ること
1. 潜在うつ患者を機械学習を用いて発見することによって治療側からの能動的なアプローチが可能となる。
1. うつ患者を早期発見することが可能となり、治療への負担を減らすことが可能となる。
1. ケアが必要な患者へ対して優先的にアプローチ可能となり、重症化を未然に防ぐことができる。

### 今後の展望
- 今回作成したモデルはrecallを重視する学習を行ったため誤検知が目立つ。precisionもより追求できるモデルを開発することができれば運用者側にかける負担（誤検知が増えると潜在うつ患者でない人にアプローチする回数が増えてしまう）を減らすことができるため今後の改善点と言える。
- UIがよいとは言えない。改善の余地あり。
- 情報確認画面からワンクリックで対象者にDMを送ることができるシステムなどを作成することなどができればベストであると考えている。
- 今回は回答者にテキストを入力してもらうことを想定しているがTwitterなどのSNSから潜在うつ患者に対してアプローチできればより多くの潜在患者を救うことにつながるのではないかと考えている。
- 今回の開発では「気軽にデータを入力してもらう」ことを重視したためテキスト以外の情報の入力を求めていないが、性別や年齢、生活環境などに関するデータを入力してもらうことによってより正確なうつ傾向スコアを算出することができる可能性がある。
### 注力したこと（こだわり等）
1. 精神状態を調査する場合、回答者が不調だと思われたくないために正直に回答しないことがある。例えば学校のアンケートなどでは「先生に見られるから当たり障りの無いことを書いておこう」と思う学生も多いと考え、うつ傾向スコア見ることが可能なを運用者に「相談センター」や「NPO法人」などを想定する事によってより本音に近いテキスト情報を取得できるように工夫をした。
1. テキストを入力した回答者には自身のスコアを知らせず、運用者のみが閲覧できるようにすることによって回答者自身の精神衛生保ちつつ（スコアを見て気落ちしてしまう可能性がある）、治療へと誘導することができる。
1. 先行研究を元にモデルの作成を行い一定の妥当性を担保した。

## 開発技術
### 活用した技術
#### API・データ
- [gooラボAPI](https://labs.goo.ne.jp/api/)（形態素解析・固有表現抽出APIを使用）
- [BandaiNamcoResearchInc/DistilBERT-base-jp](https://github.com/BandaiNamcoResearchInc/DistilBERT-base-jp)（Fine Tuningして使用）
- Twitierデータ

#### フレームワーク・ライブラリ・モジュール
- Docker
- Django
- pytorch_lightning
- transformers
- onnx
- onnxruntime


#### デバイス
* PC
- スマートフォン

### 独自技術
#### ハッカソンで開発した独自機能・技術
- ログインされたユーザ情報と投稿情報を相互に結び付けるデータベース構造
- DistilBERTをFineTuningしたモデルの開発。
- 絵文字をテキスト化し情報を活用できるように工夫した。[フォルダ](https://github.com/jphacks/C_2111/blob/master/bert/wtfml/utils/utils.py)
- 量子化・ONNXによる軽量化[フォルダ](https://github.com/jphacks/C_2111/tree/master/bert/wtfml/predictor)

#### 製品に取り入れた研究内容（データ・ソフトウェアなど）（※アカデミック部門の場合のみ提出必須）
- 玉井 森彦,  米澤（深谷）拓吾 川西 直 長谷川 晃朗, 武内 良男, 田近 亜蘭, 小川 雄右, 古川 壽亮,　(2016)．うつ傾向推定に向けたツイート内容の解析法についての一検討　言語処理学会 第22回年次大会 発表論文集, 385-388 [URL](https://www.anlp.jp/proceedings/annual_meeting/2016/pdf_dir/B2-1.pdf)
- [WTFML: Well That's Fantastic Machine Learning](https://github.com/abhishekkrthakur/wtfml)(フォルダ構成を参考にした。)
